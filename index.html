<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MINI GAME CHO BE IUUUU:3</title>

  <style>
    :root{
      --pink:#ff4d6d;
      --red:#ff2e63;
      --bg1:#ff5f7a;
      --bg2:#ff8fb3;
      --card: rgba(255,255,255,.92);
      --text:#1f1f1f;
      --muted:#6b6b6b;
      --shadow: 0 20px 70px rgba(0,0,0,.22);
      --radius: 24px;
    }

    *{ box-sizing:border-box; font-family: "Segoe UI", system-ui, -apple-system, Arial, sans-serif; }
    body{
      margin:0;
      min-height:100vh;
      color:var(--text);
      overflow-x:hidden;
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(255,255,255,.20), transparent 60%),
        radial-gradient(900px 600px at 80% 15%, rgba(255,255,255,.18), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      position:relative;
    }

    body::before{
      content:"";
      position:fixed; inset:0;
      background:
        radial-gradient(circle at 12% 18%, rgba(255,255,255,.35) 0 4px, transparent 5px),
        radial-gradient(circle at 16% 23%, rgba(255,255,255,.25) 0 3px, transparent 4px),
        radial-gradient(circle at 82% 20%, rgba(255,255,255,.35) 0 4px, transparent 5px),
        radial-gradient(circle at 78% 26%, rgba(255,255,255,.22) 0 3px, transparent 4px),

        radial-gradient(circle at 25% 70%, rgba(255,224,231,.55) 0 3px, transparent 4px),
        radial-gradient(circle at 28% 74%, rgba(255,224,231,.35) 0 2px, transparent 3px),
        radial-gradient(circle at 70% 78%, rgba(255,239,200,.45) 0 3px, transparent 4px),
        radial-gradient(circle at 73% 82%, rgba(255,239,200,.30) 0 2px, transparent 3px),

        linear-gradient(90deg, rgba(255,255,255,.06) 1px, transparent 1px),
        linear-gradient(0deg, rgba(255,255,255,.05) 1px, transparent 1px);
      background-size:
        420px 420px, 420px 420px, 420px 420px, 420px 420px,
        520px 520px, 520px 520px, 560px 560px, 560px 560px,
        70px 70px, 70px 70px;
      opacity:.9;
      pointer-events:none;
    }

    .wrap{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 26px 16px 38px;
      position:relative;
      z-index:1;
    }

    .panel{
      width:min(1180px, 100%);
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.6);
      overflow:hidden;
    }

    .header{
      padding: 24px 26px 18px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:16px;
      background: linear-gradient(135deg, rgba(255,77,109,.12), rgba(255,126,179,.10));
      border-bottom: 1px solid rgba(0,0,0,.05);
    }

    .title h1{
      margin:0;
      font-size: 20px;
      letter-spacing:.2px;
    }
    .title .sub{
      margin-top:6px;
      font-size: 13.5px;
      color: var(--muted);
      line-height: 1.45;
      max-width: 760px;
    }

    .top-actions{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .pill{
      font-size:12px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,77,109,.12);
      border: 1px solid rgba(255,77,109,.22);
      color: #b81f3d;
      font-weight:700;
      user-select:none;
    }

    .btn{
      border: none;
      cursor: pointer;
      border-radius: 999px;
      padding: 10px 14px;
      font-size: 12.5px;
      font-weight: 800;
      color: #fff;
      background: linear-gradient(135deg, var(--pink), var(--red));
      box-shadow: 0 10px 22px rgba(255,77,109,.26);
      transition: transform .15s ease, filter .15s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:hover{ filter: brightness(.98); transform: translateY(-1px); }
    .btn:active{ transform: translateY(0) scale(.98); }

    .btn.secondary{
      background: #fff;
      color: var(--pink);
      border: 1px solid rgba(255,77,109,.28);
      box-shadow:none;
    }

    .progress{
      height: 10px;
      background: rgba(255,77,109,.10);
      overflow:hidden;
    }
    .progress > div{
      height:100%;
      width: 0%;
      background: linear-gradient(90deg, var(--pink), var(--red));
      transition: width .35s ease;
    }

    .content{
      padding: 22px 26px 26px;
    }

    .question-card{
      background: rgba(255,255,255,.90);
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 20px;
      padding: 22px;
    }

    .q-title{
      margin: 0 0 10px;
      font-size: 20px;
      line-height: 1.45;
    }

    .hint{
      margin:0 0 16px;
      font-size: 13.5px;
      color: var(--muted);
      line-height: 1.45;
    }

    .options{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      margin-top: 10px;
    }
    @media (max-width: 640px){
      .options{ grid-template-columns: 1fr; }
    }

    .opt{
      display:flex;
      align-items:center;
      gap: 12px;
      padding: 16px 16px;
      border-radius: 18px;
      border: 1px solid rgba(255,77,109,.22);
      background: rgba(255,255,255,.94);
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      user-select:none;
      min-height: 66px;
    }
    .opt:hover{
      transform: translateY(-1px);
      border-color: rgba(255,77,109,.44);
      background: rgba(255,245,248,.98);
    }
    .opt:active{ transform: translateY(0) scale(.99); }

    .badgeABCD{
      width: 38px; height: 38px;
      border-radius: 12px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 950;
      color:#fff;
      background: linear-gradient(135deg, var(--pink), var(--red));
      box-shadow: 0 10px 18px rgba(255,77,109,.22);
      flex: 0 0 auto;
    }
    .opt span{
      font-size: 15px;
      line-height: 1.35;
      font-weight: 750;
    }

    .resultWrap{
      display:flex;
      flex-direction:column;
      gap: 10px;
      align-items:flex-start;
    }
    .big{
      font-size: 18px;
      font-weight: 900;
      color:#b81f3d;
    }
    .muted{
      color: var(--muted);
      font-size: 13.5px;
      line-height: 1.5;
    }
    .rowBtns{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      margin-top: 10px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="panel">
      <div class="header">
        <div class="title">
          <h1>MINI GAME CHO BE IUUUU:3</h1>
          <div class="sub">
            H√¢nn iuu ch·ªçn ƒë√°p √°n theo c·∫£m gi√°c nha. ƒê√¢y l√† m·ªôt tr√≤ ch∆°i nho nh·ªè cho vui ‚ú®
          </div>
        </div>

        <div class="top-actions">
          <div class="pill" id="stepPill">C√¢u 1/10</div>
          <button class="btn secondary" id="musicBtn" type="button">üîä Nh·∫°c</button>
        </div>
      </div>

      <div class="progress"><div id="progressBar"></div></div>

      <div class="content" id="content">
        <div class="question-card">
          <h2 class="q-title" id="question">...</h2>
          <p class="hint" id="hint">Ch·ªçn 1 ƒë√°p √°n neee.</p>
          <div class="options" id="options"></div>
        </div>
      </div>
    </div>
  </div>

  <audio id="bgMusic" loop preload="auto">
    <source src="https://cdn.pixabay.com/audio/2023/02/28/audio_8c6a5d91ae.mp3" type="audio/mpeg">
  </audio>

  <script>
    // ====== D√ÅN URL WEB APP C·ª¶A M√ÄY ·ªû ƒê√ÇY ======
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyWMCNk3D5krrGHeIeReNi5ljh7OkJfjGdf9DXl-ddanDGZCHLDcDH-WUho7AOdxQM9/exec";

    // ====== QU√Ä (·∫®N) ======
    const GIFTS = [
      { key: "lipstick", label: "Son m√¥i üíÑ" },
      { key: "necklace", label: "D√¢y chuy·ªÅn ‚ú®" },
      { key: "shirt", label: "√Åo üëï" },
      { key: "pants", label: "Qu·∫ßn üëñ" }
    ];

    // ====== C√ÇU H·ªéI ======
    const questions = [
      { type:"predict",
        q:"üéÅ N·∫øu T·∫øt n√†y c√≥ m·ªôt ‚Äúb√πa may m·∫Øn‚Äù ƒëi theo iuuu, iuu mu·ªën n√≥ gi√∫p m√¨nh ki·ªÉu g√¨ nh·∫•t?",
        a:["Tr√¥ng t∆∞∆°i t·∫Øn li·ªÅn","Tinh t·∫ø nh·∫π nh√†ng","G·ªçn g√†ng d·ªÖ ph·ªëi","Tho·∫£i m√°i x·ªãn x√≤"],
        score:{
          "Tr√¥ng t∆∞∆°i t·∫Øn li·ªÅn": {lipstick:3, necklace:0, shirt:0, pants:0},
          "Tinh t·∫ø nh·∫π nh√†ng":   {lipstick:0, necklace:3, shirt:0, pants:0},
          "G·ªçn g√†ng d·ªÖ ph·ªëi":    {lipstick:0, necklace:0, shirt:3, pants:0},
          "Tho·∫£i m√°i x·ªãn x√≤":    {lipstick:0, necklace:0, shirt:0, pants:3}
        }
      },
      { type:"predict",
        q:"üì∏ Ch·ª•p ·∫£nh T·∫øt/Valentine, H√¢nn iuu mu·ªën vibe c·ªßa m√¨nh l√†‚Ä¶",
        a:["Cute xinh x·∫Øn","Sang nh·∫π tinh t·∫ø","Ch·ªânh chu thanh l·ªãch","C√° t√≠nh c√≥ gu"],
        score:{
          "Cute xinh x·∫Øn":      {lipstick:3, necklace:0, shirt:0, pants:0},
          "Sang nh·∫π tinh t·∫ø":   {lipstick:0, necklace:3, shirt:0, pants:0},
          "Ch·ªânh chu thanh l·ªãch":{lipstick:0, necklace:0, shirt:3, pants:0},
          "C√° t√≠nh c√≥ gu":      {lipstick:0, necklace:0, shirt:0, pants:3}
        }
      },
      { type:"predict",
        q:"üßß N·∫øu c√≥ 1 th·ª© ‚Äúnh·ªè th√¥i nh∆∞ng l√†m iuuu c·∫£m th·∫•y thicc‚Äù, H√¢nn ch·ªçn lo·∫°i n√†o neee?",
        a:["Nh√¨n ph√°t th·∫•y xinh","Nh√¨n ph√°t th·∫•y sang","Nh√¨n ph√°t th·∫•y g·ªçn","Nh√¨n ph√°t th·∫•y ch·∫•t"],
        score:{
          "Nh√¨n ph√°t th·∫•y xinh": {lipstick:3, necklace:0, shirt:0, pants:0},
          "Nh√¨n ph√°t th·∫•y sang": {lipstick:0, necklace:3, shirt:0, pants:0},
          "Nh√¨n ph√°t th·∫•y g·ªçn":  {lipstick:0, necklace:0, shirt:3, pants:0},
          "Nh√¨n ph√°t th·∫•y ch·∫•t": {lipstick:0, necklace:0, shirt:0, pants:3}
        }
      },
      { type:"predict",
        q:"üåô ƒêi ch∆°i t·ªëi, iuu th√≠ch ki·ªÉu ‚Äúƒëi·ªÉm nh·∫•n‚Äù n√†o h∆°n?",
        a:["N·ªïi b·∫≠t v·ª´a ƒë·ªß","L·∫•p l√°nh v·ª´a ƒë·ªß","ƒê·∫πp chu·∫©n b√†i","Tho·∫£i m√°i chu·∫©n gu"],
        score:{
          "N·ªïi b·∫≠t v·ª´a ƒë·ªß":     {lipstick:3, necklace:0, shirt:0, pants:0},
          "L·∫•p l√°nh v·ª´a ƒë·ªß":    {lipstick:0, necklace:3, shirt:0, pants:0},
          "ƒê·∫πp chu·∫©n b√†i":      {lipstick:0, necklace:0, shirt:3, pants:0},
          "Tho·∫£i m√°i chu·∫©n gu": {lipstick:0, necklace:0, shirt:0, pants:3}
        }
      },
      { type:"predict",
        q:"ü™û Tr∆∞·ªõc khi ra ngo√†i, iuu th∆∞·ªùng ‚Äúch·ªët‚Äù th·ª© g√¨ ƒë·ªÉ t·ª± tin h∆°n?",
        a:["Th·∫ßn th√°i m·∫∑t m≈©i","M·ªôt ƒëi·ªÉm nh·∫•n tinh t·∫ø","T·ªïng th·ªÉ g·ªçn g√†ng","C·∫£m gi√°c d·ªÖ ch·ªãu"],
        score:{
          "Th·∫ßn th√°i m·∫∑t m≈©i":       {lipstick:3, necklace:0, shirt:0, pants:0},
          "M·ªôt ƒëi·ªÉm nh·∫•n tinh t·∫ø":    {lipstick:0, necklace:3, shirt:0, pants:0},
          "T·ªïng th·ªÉ g·ªçn g√†ng":        {lipstick:0, necklace:0, shirt:3, pants:0},
          "C·∫£m gi√°c d·ªÖ ch·ªãu":         {lipstick:0, necklace:0, shirt:0, pants:3}
        }
      },
      { type:"predict",
        q:"üéÄ N·∫øu ƒë∆∞·ª£c t√†ii khen H√¢nn , H√¢nn th√≠ch nghe l·ªùi khen ki·ªÉu n√†o nh·∫•t?",
        a:["‚ÄúH√¥m nay xinh gh√™ hongg‚Äù","‚ÄúNh√¨n tinh t·∫ø ghiaaa‚Äù","‚ÄúH·ª£p outfit gh√™‚Äù","‚ÄúGu ƒÉn m·∫∑c x·ªãn th·∫≠t nhaa‚Äù"],
        score:{
          "‚ÄúH√¥m nay xinh gh√™ hongg‚Äù": {lipstick:3, necklace:0, shirt:0, pants:0},
          "‚ÄúNh√¨n tinh t·∫ø ghiaaa‚Äù": {lipstick:0, necklace:3, shirt:0, pants:0},
          "‚ÄúH·ª£p outfit gh√™‚Äù":   {lipstick:0, necklace:0, shirt:3, pants:0},
          "‚ÄúGu ƒÉn m·∫∑c x·ªãn th·∫≠t nhaa‚Äù": {lipstick:0, necklace:0, shirt:0, pants:3}
        }
      },
      { type:"predict",
        q:"üå∏ Ch·ªçn 1 ‚Äúph√©p m√†u‚Äù cho ng√†y T·∫øt: H√¢nn iuu mu·ªën n√≥ gi√∫p m√¨nh‚Ä¶",
        a:["R·∫°ng r·ª° ngay l·∫≠p t·ª©c","D·ªãu d√†ng n√¢ng c·∫•p","D·ªÖ ph·ªëi ƒë·ªì m·ªçi n∆°i","D·ªÖ ƒëi d·ªÖ ch·∫°y d·ªÖ ch∆°i"],
        score:{
          "R·∫°ng r·ª° ngay l·∫≠p t·ª©c": {lipstick:3, necklace:0, shirt:0, pants:0},
          "D·ªãu d√†ng n√¢ng c·∫•p":     {lipstick:0, necklace:3, shirt:0, pants:0},
          "D·ªÖ ph·ªëi ƒë·ªì m·ªçi n∆°i":    {lipstick:0, necklace:0, shirt:3, pants:0},
          "D·ªÖ ƒëi d·ªÖ ch·∫°y d·ªÖ ch∆°i": {lipstick:0, necklace:0, shirt:0, pants:3}
        }
      },
      { type:"love",
        q:"üíó N·∫øu t√†i c√≥ m·ªôt ng√†y m·ªát m·ªèi, iuu s·∫Ω ch·ªçn chi√™u n√†o tr∆∞·ªõc?",
        a:["√îm c√°i ƒë√£","N√≥i chuy·ªán nh·∫π nh√†ng","D·∫Øt ƒëi ƒÉn cho vui","√Ω ki·∫øn kh√°c hihi"],
        score:{
          "√îm c√°i ƒë√£": {lipstick:0, necklace:1, shirt:0, pants:0},
          "N√≥i chuy·ªán nh·∫π nh√†ng": {lipstick:1, necklace:0, shirt:0, pants:0},
          "D·∫Øt ƒëi ƒÉn cho vui": {lipstick:0, necklace:0, shirt:1, pants:0},
          "√Ω ki·∫øn kh√°c hihi": {lipstick:0, necklace:0, shirt:0, pants:1}
        }
      },
      { type:"love",
        q:"ü•∫ L√∫c gi·∫≠n t√†i, H√¢nn mu·ªën anh l√†m g√¨ nh·∫•t?",
        a:["D·ªó li·ªÅn","Xin l·ªói r√µ r√†ng","√¥m iuu m·ªôt c√°iii","m√∫n c√°i kh√°c hihi"],
        score:{
          "D·ªó li·ªÅn": {lipstick:1, necklace:0, shirt:0, pants:0},
          "Xin l·ªói r√µ r√†ng": {lipstick:0, necklace:1, shirt:0, pants:0},
          "√¥m iuu m·ªôt c√°iii": {lipstick:0, necklace:0, shirt:1, pants:0},
          "m√∫n c√°i kh√°c hihi": {lipstick:0, necklace:0, shirt:0, pants:1}
        }
      },
      { type:"love",
        q:"‚ù§Ô∏è iuu ch·ªçn c√¢u n√†y nha: ‚Äúiuu c√≥ m√∫n ch·ªù ƒë·ª£i c√πng t√†i hongg...‚Äù",
        a:["r·∫•t m√∫n lunn","m√∫n g·∫∑p t√†i ngay l·∫≠p t·ª©cc","kh√¥ng, kh√¥ng m√∫n ch·ªù ","ch·ªâ nh·∫Øn cho vui"],
        score:{
          "r·∫•t m√∫n lunn": {lipstick:0, necklace:1, shirt:0, pants:0},
          "m√∫n g·∫∑p t√†i ngay l·∫≠p t·ª©cc": {lipstick:1, necklace:0, shirt:0, pants:0},
          "kh√¥ng, kh√¥ng m√∫n ch·ªù ": {lipstick:0, necklace:0, shirt:1, pants:0},
          "ch·ªâ nh·∫Øn cho vui": {lipstick:0, necklace:0, shirt:0, pants:1}
        }
      }
    ];

    // ====== STATE ======
    let index = 0;
    let answers = [];
    const total = { lipstick:0, necklace:0, shirt:0, pants:0 };

    // ====== DOM ======
    const questionEl = document.getElementById("question");
    const hintEl = document.getElementById("hint");
    const optionsEl = document.getElementById("options");
    const progressBar = document.getElementById("progressBar");
    const stepPill = document.getElementById("stepPill");
    const content = document.getElementById("content");

    // Music
    const music = document.getElementById("bgMusic");
    const musicBtn = document.getElementById("musicBtn");
    let musicOn = false;

    async function toggleMusic(){
      try{
        if(!musicOn){
          await music.play();
          musicOn = true;
          musicBtn.textContent = "üîá Nh·∫°c";
        }else{
          music.pause();
          musicOn = false;
          musicBtn.textContent = "üîä Nh·∫°c";
        }
      }catch(e){
        alert("Tr√¨nh duy·ªát ƒëang ch·∫∑n ph√°t nh·∫°c. B·∫•m l·∫°i n√∫t üîä nha!");
      }
    }
    musicBtn.addEventListener("click", toggleMusic);
    document.body.addEventListener("click", () => { if(!musicOn) toggleMusic(); }, { once:true });

    function nowVN(){
      return new Date().toLocaleString("vi-VN");
    }

    function addScore(qIndex, choice){
      const map = questions[qIndex].score?.[choice];
      if(!map) return;
      total.lipstick += map.lipstick || 0;
      total.necklace += map.necklace || 0;
      total.shirt += map.shirt || 0;
      total.pants += map.pants || 0;
    }

    function pickGift(){
      let max = -Infinity; 
      for(const g of GIFTS) max = Math.max(max, total[g.key]);
      const top = GIFTS.filter(g => total[g.key] === max);
      return top[Math.floor(Math.random() * top.length)];
    }

    async function sendResult(payload){
  await fetch(WEB_APP_URL, {
    method: "POST",
    body: JSON.stringify(payload) // ƒë·ªÉ m·∫∑c ƒë·ªãnh text/plain => kh√¥ng preflight
  });
}


    function setProgress(){
      stepPill.textContent = `C√¢u ${Math.min(index+1, questions.length)}/${questions.length}`;
      progressBar.style.width = `${(index / questions.length) * 100}%`;
    }

    function loadQuestion(){
      const current = questions[index];
      questionEl.textContent = current.q;
      hintEl.textContent = "Ch·ªçn 1 ƒë√°p √°n neee.";

      optionsEl.innerHTML = "";
      setProgress();

      const letters = ["A","B","C","D"];
      current.a.forEach((choice, i) => {
        const div = document.createElement("div");
        div.className = "opt";
        div.innerHTML = `
          <div class="badgeABCD">${letters[i] || "‚Ä¢"}</div>
          <span>${choice}</span>
        `;
        div.onclick = () => selectAnswer(choice);
        optionsEl.appendChild(div);
      });
    }

    function selectAnswer(choice){
      answers.push(choice);
      addScore(index, choice);
      index++;

      if(index < questions.length) loadQuestion();
      else showEndScreen();
    }

    async function showEndScreen(){
      progressBar.style.width = "100%";
      stepPill.textContent = "Ho√†n th√†nh ‚úÖ";

      const chosenGift = pickGift();

      const payload = {
        time: nowVN(),
        player: "H√¢nn iuu",
        gift: chosenGift.label,
        score: { ...total },
        answers: answers
      };

      let ok = true;
      try{
        await sendResult(payload);
      }catch(e){
        ok = false;
      }

      // Ng∆∞·ªùi ch∆°i KH√îNG th·∫•y k·∫øt qu·∫£, ch·ªâ th·∫•y th√¥ng b√°o ƒë√£ g·ª≠i
      content.innerHTML = `
        <div class="question-card">
          <div class="resultWrap">
            <div class="big">Done r·ªìi b√© iuuuu üíñ</div>
            <div class="muted">
              ${ok ? "K·∫øt qu·∫£ ƒë√£ ƒë∆∞·ª£c g·ª≠i cho anh r·ªìi ƒë√≥oo üíå" : "Hic... g·ª≠i k·∫øt qu·∫£ b·ªã l·ªói üò¢ B√© b·∫•m ch∆°i l·∫°i gi√∫p anh nha!"}
            </div>
            <div class="rowBtns">
              <button class="btn secondary" onclick="location.reload()">üîÅ Ch∆°i l·∫°i</button>
            </div>
            <div class="muted">Ch√∫c b√© T·∫øt vui + Valentine ng·ªçt üßßüíù</div>
          </div>
        </div>
      `;
    }

    loadQuestion();
  </script>
</body>
</html>
